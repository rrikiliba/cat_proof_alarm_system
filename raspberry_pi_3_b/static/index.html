<!DOCTYPE html>
<html>
<body>
    <h1>MQTT Client</h1>
    <p id="status">Status: Disconnected</p>
    <h2>Messages</h2>
    <ul id="messages"></ul>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>

    <script>
        client = new Paho.MQTT.Client("127.0.0.1", Number(9001), "js_client");

        // set callback handlers
        client.onConnectionLost = function (responseObject) {
            console.log("Connection Lost: "+responseObject.errorMessage);
        }

        client.onMessageArrived = function (message) {
        console.log("Message Arrived: "+message.payloadString);
        }

        // Called when the connection is made
        function onConnect(){
            document.getElementById('status').textContent = "Status: Connected";
        }

        // Connect the client, providing an onConnect callback
        client.connect({
            onSuccess: onConnect,
            onFailure: function (error) {
                console.log("Connection failed: ", error.errorMessage);
            },
        });
    </script>
</body>
</html>